function readCookie(e){if(cookies)return cookies[e];for(c=document.cookie.split("; "),cookies={},i=c.length-1;i>=0;i--)C=c[i].split("="),cookies[C[0]]=C[1];return cookies[e]}function updatePreferenceAjax(e,t){post_data=JSON.stringify({pref:e,value:t}),$.ajax({type:"POST",url:"/ajax/updatePreference.php",contentType:"application/json; charset=utf-8",dataType:"json",data:post_data,success:function(e){return!0},error:function(e){return!1}})}function watchlist(e,t,o){$.ajax({type:"POST",url:"/ajax/watchlist.php",contentType:"application/x-www-form-urlencoded; charset=ISO-8859-1",dataType:"json",data:{groupname:t,title:o,type:e,json:1},success:function(e){0==e.login&&($(".secondary-nav .watch-page.addwatch").html('<i class="fa fa-plus"></i> <span class="hidden-xs"> Watch</span>'),0==$("#loginModal").length?load_login_modal():$("#loginModal").modal("show")),0==e.res?($("#header-new .watch-page").removeClass("dropwatch").addClass("addwatch").html('<i class="fa fa-star-o"></i> Watch'),$(".secondary-nav .mobile-watch-button.dropwatch").addClass("addwatch").removeClass("dropwatch is-watched"),$(".secondary-nav .watch-page.dropwatch").addClass("addwatch").removeClass("dropwatch").html('<i class="fa fa-star-o"></i> <span class="hidden-xs"> Watch</span>')):1!=e.res&&2!=e.res||($("#header-new .watch-page").removeClass("addwatch").addClass("dropwatch").html('<i class="fa fa-star"></i> In Watchlist'),$(".secondary-nav .mobile-watch-button.addwatch").addClass("dropwatch is-watched").removeClass("addwatch"),$(".secondary-nav .watch-page.addwatch").addClass("dropwatch").removeClass("addwatch").html('<i class="fa fa-star"></i> <span class="hidden-xs"> Watch</span>'))},error:function(e){return!1}})}function setCookie(e,t,o,i){if(null==e||void 0==typeof e||null==t||void 0==typeof t)return!1;if(null==o||void 0==typeof o)a="";else{var s=864e5*o,a=new Date;a.setTime(a.getTime()+s);var n="; expires="+a.toUTCString()}path_str=null==i||void 0==typeof i?"; path="+i:"; path=/";var l=e+"="+escape(t)+n+path_str;document.cookie=l}function shareToggleResize(){function e(){new Date-t<i?setTimeout(e,i):(o=!1,$(window).width()>=675?$(".share-toggle").hide():$(".share-toggle").show())}var t,o=!1,i=200;$(window).resize(function(){t=new Date,o===!1&&(o=!0,setTimeout(e,i))})}function load_wikiword_modal(e){$.ajax({type:"POST",url:"/../../pmwiki/customize_wikiword.php",dataType:"html",data:{wikiword:e},success:function(e){$(".WikiWordModalStub").html(e),$("#WikiWordModal").modal("show")}})}function load_login_modal(){$.ajax({type:"POST",url:"/design/parts/login-modal.php",dataType:"html",success:function(e){$("#loginModalStub").html(e),$("#loginModal").modal("show")}})}function load_image_upload_modal(){if(""==$(".ImgUploadModalStub").html()){var e=$(".ImgUploadModalStub").data("pageType"),t=!!$("#article_id").length;$.ajax({type:"POST",url:"/design/parts/imguploader-modal.php",data:{pageType:e},dataType:"html",success:function(e){if($(".ImgUploadModalStub").html(e),t){var o='<p class="success-msg">Upload was successful! The markup to use is below:</p>';$(".ImgUploadModalStub #ret-msg").before(o)}if(myAwesomeDropzone=new Dropzone("#myAwesomeDropzone",{url:"/ajax/uploadImg.php"}),t){var i=$("#groupname-hidden").val(),s=$("#title-hidden").val(),a=$("#article_id").length?i+"/"+s:"",n='<a class="btn btn-default" href="/pmwiki/pmwiki.php/'+a+'?action=edit">Edit Page</a>',l='<a class="btn btn-default" href="/pmwiki/conversations.php?topic=images" style="margin-right: 3px">Image Pickin</a>';$(".ImgUploadModalStub .actions").prepend(l+n)}$(".ImgUploadModal").modal("show")}})}else $(".ImgUploadModal").modal("show")}function toggleinline(e){var t=e.getElementsByTagName("div")[0];"none"==t.style.display?t.style.display="inline":t.style.display="none"}function toggleAllFolders(){for(var e=window.document.getElementsByTagName("div"),t=0;t<e.length;t++)"true"==e[t].getAttribute("isfolder")&&("block"==last_toggle?e[t].style.display="none":e[t].style.display="block");last_toggle="block"==last_toggle?"none":"block"}function togglefolder(e){var t=object(e);"none"==t.style.display?t.style.display="block":t.style.display="none"}function setAllFolders(e){var t=""+e;""==t&&(t="none"),"closed"==t&&(t="none"),"open"==t&&(t="block");for(var o=window.document.getElementsByTagName("div"),i=0;i<o.length;i++){o[i].getAttribute("isfolder")&&"true"==o[i].getAttribute("isfolder")&&(o[i].style.display=t);var s=""+o[i].getAttribute("class");if("folderlabel"==s){var a=""+o[i].innerHTML;-1!=a.indexOf("open/close all folders")&&o[i].setAttribute("class","folderlabelopen")}}last_toggle=t}function subpage(e,t){var o=""+getselection(e);if(""!=o.trim()){var i="/pmwiki/pmwiki.php/"+o+"/"+t;window.location.href=i}}function togglenote(e){var t=object(e),o=t.style.display;"none"==o&&(t.style.display="inline"),"inline"==o&&(t.style.display="none")}function getRandomPage(e){$.ajax({type:"POST",url:"/pmwiki/randomitem.php?p="+e+"&ajax=1",success:function(e){window.location.assign(e)},error:function(e){return!1}})}function check_troper_lock(e,t){post_data=JSON.stringify({groupname:e,title:t}),$.ajax({type:"POST",url:"/ajax/check_troper_lock.php",contentType:"application/json; charset=utf-8",dataType:"json",data:post_data,success:function(o){o.logged_in?1==o.troper_locked?($("#editLockModal .troper_locked_message").html("This Article is checked out until "+o.display_time+" by : <a href=/pmwiki/pmwiki.php/Tropers/"+o.lock_troper+">"+o.lock_troper+"</a>"),$("#editLockModal").modal("show")):window.location.href="http://"+window.location.hostname+"/pmwiki/pmwiki.php/"+e+"/"+t+"?action=edit":0==$("#loginModal").length?load_login_modal():$("#loginModal").modal("show")},error:function(o){return window.location.href="http://"+window.location.hostname+"/pmwiki/pmwiki.php/"+e+"/"+t+"?action=edit",!0}})}function setKSMessageCookie(e){document.cookie="ksMessage="+e+"; path=/"}function setForumGameDayCookie(e){document.cookie="forumGameDay="+e+"; path=/",$.ajax({type:"POST",url:"/ajax/forum-game.php",dataType:"json",data:{participating:"true"},success:function(e){data=JSON.parse(e)}})}function object(e){return document.getElementById&&document.getElementById(e)?document.getElementById(e):document.all&&document.all(e)?document.all(e):document.layers&&document.layers[e]?document.layers[e]:!1}function blockloaded(){return 200==blockreq.status}function reqok(){return blockreq&&blockloaded()}function sendurl(e){if(delete blockreq,window.XMLHttpRequest)blockreq=new XMLHttpRequest,blockreq.open("get",e,!1),blockreq.send(null);else if(window.ActiveXObject){try{blockreq=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{blockreq=new ActiveXObject("Microsoft.XMLHTTP")}catch(o){}}blockreq&&(blockreq.open("get",e,!1),blockreq.send())}}function getNodeValue(e,t){var o="";if(e.hasChildNodes())for(var i=0;""==o&&i<e.childNodes.length;){if(!e.childNodes[i].firstChild)return"";o=e.childNodes[i].nodeName==t?e.childNodes[i].firstChild.nodeValue:getNodeValue(e.childNodes[i],t),i++}return o.trim()}function unlock(e){var t="http://"+window.location.hostname;t+="/pmwiki/unlock.php?pagename="+e,sendurl(t);var o=""+window.location.href;o=o.replace("?action=edit",""),window.location.href=o}function checkauthor(e){var t=object("authorinput"),o=""+t.value;return o=o.trim(),""==o?(object("inputform").action="#",object("inputmessage").innerHTML="please make up a wiki handle",t.focus(),!1):!0}function do_preview(){return object("source").value=object("editarea").value,!1}function togglepanel(e){closeall(e);var t=object(e);"none"==t.style.display?t.style.display="block":t.style.display="none"}function closeall(e){if(object("wikileftpage"))for(var t=object("wikileftpage").getElementsByTagName("div"),o=0;o<t.length;o++)t[o].id!=e&&"true"==t[o].getAttribute("iscat")&&(t[o].style.display="none")}function getselection(e){for(var t="",o=0;o<e.options.length;o++)if(e.options[o].selected){t=e.options[o].value?e.options[o].value:e.options[o].text;break}return t}function createanchor(e,t){e.setAttribute("href",t)}function findfor(){var e=""+object("findfor").value;""!=e&&(window.location.href="/pmwiki/el.php?findfor="+e)}function object(e){return document.getElementById&&document.getElementById(e)?document.getElementById(e):document.all&&document.all(e)?document.all(e):document.layers&&document.layers[e]?document.layers[e]:!1}function previewPost(){var e=$("#postedit").val(),t=$("#preview-container"),o=$("#preview-body");$.ajax({type:"POST",url:"/../ajax/forum-post-preview.php",data:{raw_html:e},dataType:"html",success:function(e){o.html(e),t.show()},error:function(e){}})}function hidePreview(){var e=$("#preview-container");e.hide()}function watchlist_mark_all_as_read(){$.ajax({type:"POST",url:"/../ajax/watchlist.php",data:{type:"markAllAsRead",json:!0},dataType:"json",success:function(e){window.location.href="/pmwiki/awl.php"}})}function watchlist_drop(e,t,o){$(e).hide();var i=$(e).closest(".post-item");$(i).find(".post-meta").prepend('<img class="watchlist-drop-loading" src="/img/loading-alt.gif" alt="loading" />'),$.ajax({type:"POST",url:"/../ajax/watchlist.php",data:{type:"drop",groupname:t,title:o,json:!0},dataType:"json",success:function(t){$(e).closest(".post-item").remove()}})}function showRestoreModal(e){var t=$(e).closest("form"),o=$("#restore_form"),i=$(t).find("input[name='groupname']").val(),s=$(t).find("input[name='title']").val(),a=$(t).find("input[name='isolated']").val();$(o).find("input[name='groupname']").val(i),$(o).find("input[name='title']").val(s),$(o).find("input[name='isolated']").val(a),$(o).removeClass(),$(o).addClass(i+s),$(o).find(".isolated-btn").attr("onclick","flip_iso('"+i+"','"+s+"')"),1==a?$(".isolated-container").html("yes"):$(".isolated-container").html("no"),$("#confirmRestoreModal").modal("show")}function flip_iso(e,t){var o=e+"."+t,i=$("."+e+t);$(i).find(".isolated-btn").attr("onclick",""),$(i).find(".isolated-btn").attr("disabled","disabled"),$.ajax({type:"GET",url:"/../pmwiki/flip_iso.php",data:{t:o,json:!0,is_ajax:"true"},dataType:"json",success:function(o){0==o.is_isolated?($(i).find(".iso-label").each(function(e,t){$(t).html("no")}),$(i).find(".isolated-btn").removeClass("btn-success"),$(i).find(".isolated-btn").addClass("btn-danger")):($(i).find(".iso-label").each(function(e,t){$(t).html("yes")}),$(i).find(".isolated-btn").removeClass("btn-danger"),$(i).find(".isolated-btn").addClass("btn-success")),$(i).find(".isolated-btn").each(function(o,i){$(i).attr("onclick","flip_iso('"+e+"','"+t+"')"),$(i).removeAttr("disabled")}),$(i).closest("td").prev("td").find("input[name='isolated']").each(function(e,t){$(t).val(o.is_isolated)})}})}function show_reasons(e,t){var o=".reason_"+t;$(o).each(function(){$(this).is(":visible")?($(this).hide(),$(e).html("+")):($(this).show(),$(e).html("-"))})}var lastChecked=null;$(function(){$(".tuck-menu .mobile-dropDown-list").responsiveMenuTuck({disableMobile:!0});var e=$("#groupname-hidden").val(),t=$("#title-hidden").val(),o=$("#article_id").val(),i=158;top.location!=location&&(top.location.href=document.location.href),$(".sm-device-left-menu-btn").on("click",function(e){e.preventDefault();var t=$(window).scrollTop();$("body").addClass("sm-device-menu-open"),$("#sm-device-menu").slideDown(function(){$(this).find(".btn-close").fadeIn(),$(".btn-close").on("click",function(){$(this).fadeOut(),$("#sm-device-menu").slideUp(),$("body").removeClass("sm-device-menu-open"),setTimeout(function(){window.scroll(0,t)},0)})})}),$(".mobile-dropdown-toggle").click(function(){$(this).closest("nav").find(".mobile-dropDown-list").addClass("active")}),$(".mobile-dropDown-closeButton").click(function(){$(".mobile-dropDown-list.active").removeClass("active")}),$("#sm-device-menu").find("a.expand").on("click",function(){$(this).parent().toggleClass("open"),$(this).next().toggle("open")}),$(".social-popup").on("click",function(e){e.preventDefault();var t=$(this),o=t.attr("href"),i=window.screen.width<500?window.screen.width:500,s=window.screen.width<500?window.screen.height:500,a=window.screen.width/2-(i/2+10),n=topPosition=window.screen.height/2-(s/2+50),l="status=no,height="+s+",width="+i+",resizable=yes,left="+a+",top="+n+",screenX="+a+",screenY="+n+",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no";if(t.hasClass("deep-link")){var r=t.attr("data-deepLink-uri");window.location=r,setTimeout(function(){window.open(o,"sharer",l)},200)}else window.open(t.attr("href"),"sharer",l)}),"undefined"==typeof valid_user,$("#cse-search-box .input-group-btn").click(function(){$("form#cse-search-box").submit()}),$("#search-submit-mobile").click(function(){$("form#cse-search-box-mobile").submit()}),$(".sm-device-right-search-btn").click(function(){$("#mobile-search-bar").slideToggle(200),$("#mobile-search-bar input:text").focus()});var s=$(".chkbox");if(s.click(function(e){if(!lastChecked)return void(lastChecked=this);if(e.shiftKey){var t=s.index(this),o=s.index(lastChecked);s.slice(Math.min(t,o),Math.max(t,o)+1).attr("checked",lastChecked.checked)}lastChecked=this}),$("#main-nav .dropdown-toggle").click(function(){return $(this).parent().find("ul.dropdown-menu").slideToggle(200),!1}),$(".edit-menu").on("click",function(e){e.stopPropagation(),$(".create-subpage, .more-subpages").children("ul").css("display","none"),$(this).children("ul").toggle()}),$(".create-subpage").on("click",function(e){e.stopPropagation(),$(".edit-menu, .more-subpages").children("ul").css("display","none"),$(this).children("ul").toggle()}),$(".more-subpages").on("click",function(e){e.stopPropagation(),$(".edit-menu, .create-subpage").children("ul").css("display","none"),$(this).children("ul").toggle()}),$(document).on("click",function(){$(".edit-menu, .more-subpages, .create-subpage").children("ul").css("display","none")}),$("#close-fav-notice").click(function(){$("#fav-notice").empty(),$(this).hide()}),$(".message-icon").click(function(){window.location="/pmwiki/pm.php"}),$(".search-form a").on("click",function(e){e.preventDefault(),$(this).closest("form").submit()}),$(".post-changes .page-controls a").on("click",function(e){if(e.preventDefault(),$(this)[0].hasAttribute("data-sort-key")){var t=$(this).attr("data-sort-key");val=$(this).attr("data-sort-val"),location=location.origin+location.pathname+"?"+t+"="+val}}),$(".spoiler, .spoiler-off").click(function(e){return"a"==e.target.nodeName.toLowerCase()&&$(this).hasClass("spoiler-off")?!0:"sup"==e.target.nodeName.toLowerCase()&&$(this).hasClass("spoiler-off")?!0:($(this).toggleClass("spoiler").toggleClass("spoiler-off"),void($(this).hasClass("spoiler-off")&&e.preventDefault()))}),$(".sidebar-right .expand").click(function(){$(this).find(".fa-plus-circle").toggleClass("fa-minus-circle"),$(this).next("ul").slideToggle(200)}),$(".sidebar-collapsible li").on("click",function(){$(this).toggleClass("open")}),$(document).on("click",".addwatch",function(o){$(this).hasClass("watch-page")&&(o.preventDefault(),$(this).closest(".secondary-nav").append('<span class="watch-msg"><a href="/pmwiki/awl.php">View Watchlist <i class="fa fa-angle-right"></i></a></span>'),$(".addwatch").text("Adding")),$("#dicussion-page-hidden").length>0&&(t=$("#dicussion-page-hidden").val()),watchlist("add",e,t)}),$(document).on("click",".dropwatch",function(o){$(this).hasClass("watch-page")&&(o.preventDefault(),$(this).closest(".secondary-nav").find(".watch-msg").remove(),$(".dropwatch").text("Removing")),$("#dicussion-page-hidden").length>0&&(t=$("#dicussion-page-hidden").val()),watchlist("drop",e,t)}),$(".ks-close").click(function(e){$(".ks-cont").toggle(),e.preventDefault()}),$(".ks-show").click(function(e){$(".ks-cont").toggle(),e.preventDefault()}),$(".flash-content").each(function(){this.style.setProperty("display","inline-block","important")}),$(window).width()>=675?$(".share-toggle").hide():$(".share-toggle").show(),$("#sidr.mobile-slideout .expand").click(function(){$(this).next("ul").slideToggle(200),$(this).parent().toggleClass("open")}),$(".secondary-nav").on("click","#WikiWordModalLink",function(){0==$("#WikiWordModalStub").length?load_wikiword_modal(t):$("#WikiWordModal").modal("show")}),$("#header-new .LoginModalLink").hasClass("is-loggedIn")||$("#header-new, .main-body").on("click",".LoginModalLink",function(e){e.preventDefault(),0==$("#loginModal").length?load_login_modal():$("#loginModal").modal("show")}),$(window).scroll(function(){if($(".article-header .article-share").length){var e=$(".article-header .article-share").offset().top;e-$(window).scrollTop()<0?($("#header .meta .fav-page > a").css({display:"inline"}),$(".share-toggle .body-share").css({position:"fixed",display:"block"})):($("#header .meta .fav-page > a").css({display:"none"}),$(".share-toggle .body-share").css({display:"none"}))}}),$(".display-options").each(function(){$(this).find(".display-btn").on("click",function(e){e.preventDefault();var t=$(e.target).hasClass("display-btn")?$(e.target):$(e.target).closest(".display-btn"),o=t.find(".selector"),s=!t.find(".selector").hasClass("is-off"),a;t.hasClass("disabled")?($("body").hasClass("sm-device-menu-open")&&($("#sm-device-menu").slideUp(),$("body").removeClass("sm-device-menu-open")),0==$("#loginModal").length?load_login_modal():$("#loginModal").modal("show")):(s?(o.removeClass("is-on"),o.addClass("is-off")):(o.addClass("is-on"),o.removeClass("is-off")),t.hasClass("spoiler-btn")?s?(t.removeClass("active"),t.find("input").prop("checked",!1),$(".spoiler-off").addClass("spoiler").removeClass("spoiler-off"),setCookie("spoilerpref","hidden","300","/"),updatePreferenceAjax("spoilerpref","hidden"),a="Spoilers are now hidden"):(t.addClass("active"),t.find("input").prop("checked",!0),$(".spoiler").addClass("spoiler-off").removeClass("spoiler"),setCookie("spoilerpref","visible","300","/"),updatePreferenceAjax("spoilerpref","visible"),a="Spoilers are now visible"):t.hasClass("nightvision-btn")?s?(0!=$('link[href*="/design/css/night-vision.css?rev='+i+'"]').length&&$('link[href*="/design/css/night-vision.css?rev='+i+'"]').remove(),$("#header-new .brand .img-default").attr("src","/img/logo-light.png"),$("#header-new .brand .img-sticky").attr("src","/img/logo-light-sm.png"),setCookie("night_vision","off","300","/"),a="Night vision is off"):(0==$('link[href*="/design/css/night-vision.css?rev='+i+'"]').length&&$("head").append('<link rel="stylesheet" href="/design/css/night-vision.css?rev='+i+'" type="text/css" />'),$("#header-new .brand .img-default").attr("src","/img/logo-dark.png"),$("#header-new .brand .img-sticky").attr("src","/img/logo-dark-sm.png"),setCookie("night_vision","on","300","/"),a="Night vision is on"):t.hasClass("wideload-btn")?(s?($("body .container").removeClass("wide-load"),setCookie("wide_load","off","300","/"),updatePreferenceAjax("wide_load","off"),a="Wide load is off"):($("body .container").addClass("wide-load"),setCookie("wide_load","on","300","/"),updatePreferenceAjax("wide_load","on"),a="Wide load is on"),$(".tuck-menu .mobile-dropDown-list").data("responsiveMenuTuck").resetMenu()):t.hasClass("sticky-btn")?s?($(".header-container").addClass("unstick"),$("body").addClass("unstick"),setCookie("sticky_header","off","300","/"),updatePreferenceAjax("sticky_header","off"),a="Sticky Header is off"):($(".header-container").removeClass("unstick"),$("body").removeClass("unstick"),setCookie("sticky_header","on","300","/"),updatePreferenceAjax("sticky_header","on"),a="Sticky Header is on"):t.hasClass("classic-btn")?s?($("body .container").removeClass("mirror-mode"),setCookie("mirror_mode","off","300","/"),updatePreferenceAjax("mirror_mode","off"),a="Classic Sidebar is off"):($("body .container").addClass("mirror-mode"),setCookie("mirror_mode","on","300","/"),updatePreferenceAjax("mirror_mode","on"),a="Classic Sidebar is on"):t.hasClass("related-pages-btn"))})}),$(".search-form .submit-btn").on("click",function(e){e.preventDefault();var t=$(this).closest(".search-form"),o=t.find(".form-control");!o.val().length>0?o.parent().append('<div class="error-msg"><p>search field cannot be empty</p></div>'):t.submit()}),$(".xxxsm-device-left-menu-btn, .xxsm-side-menu-btn a").sidr({name:"sidr",onOpen:function(e){var t=$("#sidr").width();$('<div class="sidr-overlay"></div>').appendTo("body"),$(".sidr-overlay").css({left:t,display:"block"}),$(".sidr-overlay").on("click",function(){$(".sidr-overlay").remove(),$.sidr("close","sidr")})},onClose:function(e){$(".sidr-overlay").remove(),$(".sidr-overlay").css({display:"none"})}}),$(".search-toggle").on("click",function(e){e.preventDefault();var t=$(this).offset().left,o=$(window).width();991>o?$(this).next().addClass("sm-device-search"):($(this).next().removeClass("sm-device-search"),$(this).next().find(".input-group").css({width:o-t+15+"px"})),$(this).next().css({display:"block"}),$('<div class="sticky-search-overlay"></div>').appendTo("body"),$(".sticky-search-overlay").on("click",function(){$(".header-search-sticky").hide(),$(".sticky-search-overlay").remove()}),$(this).next().find(".input-group input#srch-term").focus()}),$(".topic-multiselect").topicMultiselect(),$(".gallery-content").on("click",function(e){e.preventDefault();var t=!!$(e.target).attr("src").length;if(t){if($(e.target).hasClass("cur-profile-img"))return!0;$.each($(".gallery-content img"),function(){$(this).removeClass("cur-profile-img")}),$(e.target).addClass("cur-profile-img")}}),$(".update-profile-image").on("click",function(){var e=$(".cur-profile-img").attr("src");$.ajax({type:"POST",url:"/ajax/change_profile_image.php",data:{src:e},success:function(e){data=JSON.parse(e),data.success&&(window.location.href="/pmwiki/profile.php")}})}),$("#alert-banner-cont")){var a="http://ip-api.com/json";$.ajax({url:a,type:"GET",success:function(e){"US"==e.countryCode&&$("#alert-banner-cont").show()}})}siteHeader.init(),shareToggleResize(),tooltip.init(),newsletterSignup.init(),userIdle.init(),showMoreContent.init()});var siteHeader={init:function(){var e=this;e.clickHandlers.randomBtn(e),e.clickHandlers.searchBtn(e),e.onPageResize(e)},clickHandlers:{randomBtn:function(e){$("#header-new .toggle-random-btns").on("click",function(e){e.preventDefault();var t=$(this),o=$(window).width()-($(this).offset().left+$(this).outerWidth());$(".tray-random.header-tray").hasClass("active-persistent")?$(".tray-random.header-tray").removeClass("active-persistent"):($(".tray-random.header-tray").css("right",o+"px !important"),$(".tray-random.header-tray").toggleClass("active"),$("body").append('<div id="header-whiteout"></div>'),$("#header-whiteout").on("click",function(e){$(".tray-random.header-tray").toggleClass("active"),$(this).remove()}))})},searchBtn:function(e){$("#header-new .search-toggle").on("click",function(e){e.preventDefault();var t=$(this),o=$(window).width()-($(this).offset().left+$(this).outerWidth());$(".tray-search.header-tray").css("right",o+"px"),$(".tray-search.header-tray").toggleClass("active"),$("body").append('<div id="header-whiteout"></div>'),$("#header-whiteout").on("click",function(e){$(".tray-search.header-tray").toggleClass("active"),$(this).remove()})})}},resetToggleStates:function(e){$("#header-new").removeClass("active-dropdown"),$(".header-tray").removeClass("active"),$("#header-whiteout").remove()},onPageScroll:function(e){$(window).load(function(){$(window).scrollTop()>$("#header-new").outerHeight()?$("body").addClass("isScrolling"):$("body").removeClass("isScrolling");var e=$($("#header-new").attr("data-stickyHeader-sel")).offset().top+$($("#header-new").attr("data-stickyHeader-sel")).outerHeight();$(window).scrollTop()>e?($("#header-new").addClass("sticky-active"),$("body").addClass("sticky-header-active")):($("#header-new").removeClass("sticky-active"),$("body").removeClass("sticky-header-active"))}),$(window).scroll(function(){$(window).scrollTop()>$("#header-new").outerHeight()?$("body").addClass("isScrolling"):$("body").removeClass("isScrolling");var e=$($("#header-new").attr("data-stickyHeader-sel")).offset().top+$($("#header-new").attr("data-stickyHeader-sel")).outerHeight();$(window).scrollTop()>e?($("#header-new").addClass("sticky-active"),$("body").addClass("sticky-header-active")):($("#header-new").removeClass("sticky-active"),$("body").removeClass("sticky-header-active"))})},onPageResize:function(e){function t(){new Date-o<s?setTimeout(t,s):(i=!1,e.resetToggleStates(e))}var o,i=!1,s=200,a=$(window).width();$(window).resize(function(){$(window).width()!==a&&(o=new Date,i===!1&&(i=!0,setTimeout(t,s)))})}},resposiveMenuTuck={config:{moreItemsMarkup:function(){var e='<li class="dropdown more-links">';return e+='<a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><span class="hidden-sm hidden-md hidden-lg"><i class="fa fa-th-list"></i></span><span class="hidden-xs">More<i class="glyphicon glyphicon-triangle-bottom"></i></span><span class="xs-hide-more"></span></a>',e+='<ul class="dropdown-menu pull-right">',e+="</ul>"}},init:function(){var e=this;$(".tuck-menu").each(function(){$thisParentUl=$(this),$(window).width()>450&&e.set.itemStatus($thisParentUl,e)})},set:{objData:function(e,t){t.set.resetDom(e,t,!0),e.data("obj",{liItems:[],moreLinksActive:!0,offset:$(this).attr("data-tuckMenu-offset")?$(this).attr("data-tuckMenu-offset"):0});var o=e.data("obj");$("ul:first > li",e).each(function(e){o.liItems[e]={markup:$(this).html(),index:e,show:!0,isHidden:!1}})},itemStatus:function(e,t){var o=e.find("ul li"),i=e.data("obj"),s=[],a=e.find("ul li:visible"),n=$(a.get(0)).offset().top;a.each(function(){$(this).offset().top!==n&&(s.push($(this)),$(this).hide())}),s.push(a.not(":hidden").last()),a.not(":hidden").last().hide();for(var l=0;l<s.length;l++)s[l].show(),e.find(".more-links ul").append(s[l]);e.find(".more-links").show(),console.log(s)},resetDom:function(e,t,o){var i=e.data("obj");if(void 0!==o)e.find(".more-links").remove();else for(var s=0;s<i.liItems.length;s++)$("ul:first > li",e).eq(i.liItems[s].index).css({display:"inline-block"})},dom:function(e,t){var o=e.data("obj");$("ul:first > li.more-links",e).remove(),o.moreLinksActive&&$("ul:first",e).append(t.config.moreItemsMarkup());for(var i=0;i<o.liItems.length;i++)o.liItems[i].isHidden||(o.liItems[i].show?$("ul:first > li",e).eq(o.liItems[i].index).css({display:"inline-block"}):($("ul:first > li",e).eq(o.liItems[i].index).css({display:"none"}),$(".more-links ul",e).append("<li>"+o.liItems[i].markup+"</li>")));$("ul:first",e).find(".more-links").show(),$(e).css({overflow:"visible"})}},onresize:function(e,t){function o(){new Date-i<a?setTimeout(o,a):(s=!1,$(window).width()>450&&$(".tuck-menu").each(function(){var e=$(this);t.set.objData(e,t),t.set.resetDom(e,t),t.set.itemStatus(e,t),t.set.dom(e,t)}),$("body").removeClass("isResizing"))}var i,s=!1,a=200;$(window).resize(function(){i=new Date,$("body").addClass("isResizing"),s===!1&&(s=!0,setTimeout(o,a))})}},tooltip={init:function(){var e=this;$("[data-tooltip]").each(function(){if("closed"!==readCookie("tooltip-"+$(this).attr("data-tooltip-name"))){var t=e.build(e,$(this));e.setPos(e,$(this),t),e.onresize(e,$(this))}})},build:function(e,t){var o=t.attr("data-tooltip"),i=t.attr("data-tooltip-behavior"),s={tooltipId:t.attr("data-tooltip-name"),tooltipPos:t.attr("data-tooltip-align")?t.attr("data-tooltip-align"):!1,elPos:e.utils.getElPos(t)},a=t.attr("data-tooltip-style")?" "+t.attr("data-tooltip-style"):"",n='<div id="'+s.tooltipId+'" class="tooltip'+a+'">'+o+"</div>";return $("body").prepend(n),t.on({mouseenter:function(){$("#"+s.tooltipId).fadeIn()},mouseleave:function(){$("#"+s.tooltipId).fadeOut()}}),"onload"===i&&$("#"+s.tooltipId).on("click",function(){e.onclose(e,$(this))}),s},setPos:function(e,t,o){var i=$("#"+o.tooltipId),s=i.outerWidth(),a=i.outerHeight(),n=o.elPos.top-a,l;if("right"===o.tooltipPos){var r=t.outerWidth();l=r+(o.elPos.left-s)}else l=o.elPos.left-s;$("#"+o.tooltipId).css({left:l+.05*l,top:n+.01*n})},onclose:function(e,t){t.fadeOut(),setCookie("tooltip-"+t.attr("id"),"closed","300","/")},onresize:function(e,t){function o(){if(new Date-i<a)setTimeout(o,a);else{s=!1;var n={tooltipId:t.attr("data-tooltip-name"),elPos:e.utils.getElPos(t)};e.setPos(e,n),$("#"+n.tooltipId).removeClass("isResizing")}}var i,s=!1,a=200;$(window).resize(function(){i=new Date,$("#"+t.attr("data-tooltip-name")).addClass("isResizing"),s===!1&&(s=!0,setTimeout(o,a))})},utils:{getElPos:function(e){return elPos={top:Math.floor(e.offset().top),right:Math.floor($(window).width()-e.offset().left),bottom:Math.floor($(window).width()-e.offset().top),left:Math.floor(e.offset().left)}}}},newsletterSignup={init:function(){var e=this;$(".newsletter-signup").unbind().on("click blur",function(t){t.preventDefault(),t.stopPropagation();var o=!1;if(($(t.target).hasClass("btn-submit")||$(t.target).parent().hasClass("btn-submit"))&&(o=!0),"blur"===t.type||o){var i=e.validate(e,$(this).find("#subscription-email").val());if(i.hasErrors)e.msgHandling(e,i,$(this));else{var s={email:$(this).find("input").val()};e.submitForm(e,s,$(this))}}})},validate:function(e,t){var o=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,i=!1,s={hasErrors:!1,msg:""};return t.length<=0?(i=!0,s.hasErrors=!0,s.msg="You must enter an email"):i||o.test(t)||(s.hasErrors=!0,s.msg="Please enter a valid email"),s},msgHandling:function(e,t,o){var i=o.find("input"),s=i.closest(".input-group").prev().hasClass("msg"),a=t.hasErrors?"error":"success";s?(o.find(".msg").removeClass("success error"),o.find(".msg").text(t.msg).addClass(a)):i.closest(".input-group").before('<div class="msg '+a+'">'+t.msg+"</div>")},submitForm:function(e,t,o){$.ajax({type:"POST",url:"/ajax/subscribe_email.php",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(t),success:function(t){if(1==t.error){var i={hasErrors:!0,msg:t.error_msg};e.msgHandling(e,i,o)}else{var i={hasErrors:!1,msg:"You have successfully subscribed"};e.msgHandling(e,i,o)}}})}},userIdle={init:function(){var e=this;$("[data-userIdle]").each(function(){e.eventListener(e,$(this))})},actions:{glowRand:function(){$(".secondary-random-btn i").addClass("glow-text"),setTimeout(function(){$(".secondary-random-btn i").removeClass("glow-text")},1500)}},eventListener:function(e,t){function o(){a+=1,a>i&&e.actions[s]()}var i=t.attr("data-userIdle"),s=t.attr("data-userIdle-action"),a=0;setInterval(o,6e4),$(document).on("mousemove",function(){a=0}),$(document).keypress(function(){a=0})}},showMoreContent={init:function(){var e=this;if($("[data-showMore-content]").length){var t=$("[data-showMore-content]"),o=t.attr("data-showMore-content"),i=t.attr("data-showMore-hide");window.innerWidth<=700&&$(".page-content").height()>1e3?e.set(e,t,o,i):e.onresize(e,t,o,i)}},set:function(e,t,o,i){$(".article-page").addClass("preview_mode"),t.on("click",function(){$(".native-ad").hide(),$(".related-pages").hide(),$(this).hide(),$(this).parent().parent().addClass("showMore-clicked"),$(o).fadeIn("slow"),$(i).fadeOut(),$(".alt-titles").show(),$(".wiki-walk").show()})},onresize:function(e,t,o,i){function s(){new Date-a<l?setTimeout(s,l):(n=!1,window.innerWidth<=700&&$(".page-content").height()>1e3&&e.set(e,t,o,i))}var a,n=!1,l=200;$(window).resize(function(){a=new Date,n===!1&&(n=!0,setTimeout(s,l))})}},cookies,trackOutboundLink=function(e){ga("send","event","outbound","click",e,{hitCallback:function(){}})},trackRandomBtnClick=function(e,t){ga("send","event","button","click",e,{hitCallback:function(){document.location=t}})},last_toggle="none";String.prototype.trim=function(){return this.replace(/^\s+/g,"").replace(/\s+$/g,"")},String.prototype.csv=function(){return this.replace(/\s+/g,",")};var blockreq;jQuery.fn.topicMultiselect=function(){$(this).each(function(){var e=$(this).find("input:checkbox");e.each(function(){var e=$(this);e.prop("checked")&&e.parent().addClass("topic-multiselect-on"),e.click(function(){e.prop("checked")?e.parent().addClass("topic-multiselect-on"):e.parent().removeClass("topic-multiselect-on")})})})},$(window).resize(function(){
$(window).width()>=768&&$(".tray-random").removeClass("active")}),$(window).scroll(function(){var e=$("#stick-bar"),t=$("#stick-cont"),o=$(".main-left").height();$(".header-container").hasClass("unstick")||$("body").hasClass("unstick")?$(".header-container").hasClass("unstick")&&$("body").hasClass("unstick")&&(e.hasClass("stick-top50")&&e.removeClass("stick-top50"),$("#stick-bar").length>0&&o>e.position().top+600&&($(window).scrollTop()>=t.offset().top?(t.height(o-t.offset().top+160),e.addClass("stick-top")):e.removeClass("stick-top"),$(window).scrollTop()+$(window).height()>$(document).height()-$("footer").height()+$(".ad-content-bottom").height()-275&&e.height()>275?e.addClass("stick-bottom").css("margin-top",t.height()-583).removeClass("stick-top",1):$(window).scrollTop()+$(window).height()>$(document).height()-$("footer").height()+$(".ad-content-bottom").height()+30&&e.height()<=275?e.addClass("stick-bottom").css("margin-top",t.height()-253).removeClass("stick-top",1):$(window).scrollTop()+$(window).height()<$(document).height()-$("footer").height()+$(".ad-content-bottom").height()-275&&e.hasClass("stick-bottom")&&e.removeClass("stick-bottom").css("margin-top",0).addClass("stick-top",1),$(".main-left").offset().top+o-300<=$(window).scrollTop()&&e.hasClass("stick-top")&&e.removeClass("stick-top").addClass("stick-bottom").css("margin-top",t.height()-253),$(window).scrollTop()<$("#stick-bar").offset().top&&e.hasClass("stick-bottom")&&e.removeClass("stick-bottom").css("margin-top",0).addClass("stick-top",1))):(e.hasClass("stick-top")&&e.removeClass("stick-top"),$("#stick-bar").length>0&&o>e.position().top+529&&($(window).scrollTop()>=t.offset().top-51?(t.height(o-t.offset().top+160),e.addClass("stick-top50")):e.removeClass("stick-top50"),$(window).scrollTop()+$(window).height()>$(document).height()-$("footer").height()+$(".ad-content-bottom").height()-275&&e.height()>275?e.addClass("stick-bottom").css("margin-top",t.height()-583).removeClass("stick-top50",1):$(window).scrollTop()+$(window).height()>$(document).height()-$("footer").height()+$(".ad-content-bottom").height()+30&&e.height()<=275?e.addClass("stick-bottom").css("margin-top",t.height()-253).removeClass("stick-top50",1):$(window).scrollTop()+$(window).height()<$(document).height()-$("footer").height()+$(".ad-content-bottom").height()-275&&e.hasClass("stick-bottom")&&e.removeClass("stick-bottom").css("margin-top",0).addClass("stick-top50",1),$(".main-left").offset().top+o-300<=$(window).scrollTop()&&e.hasClass("stick-top50")&&e.removeClass("stick-top50").addClass("stick-bottom").css("margin-top",t.height()-253),$(window).scrollTop()<$("#stick-bar").offset().top&&e.hasClass("stick-bottom")&&e.removeClass("stick-bottom").css("margin-top",0).addClass("stick-top50",1)))});